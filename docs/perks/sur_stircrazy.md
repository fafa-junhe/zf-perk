# 幸存者职业：狂热者 (Stir-Crazy)

## 介绍

**名称**: 狂热者 (Stir-Crazy)

**简短描述**:
> 狂热者(Stir-Crazy)——速度决定攻击力

**详细描述**:
> 你的移动速度会给你提供攻击力加成,速度越快,攻击力就越高.
>
> “这个职业曾经能获得200%的攻击力加成.”
> 推荐职业: 火焰兵、爆破骑士

## 参数

| 参数名                   | 默认值 | 备注                                                               |
| ------------------------ | ------ | ------------------------------------------------------------------ |
| `ZF_STIRCRAZY_MAX_POINTS`| 5      | 用于计算平均位置的先前位置点的数量                                 |
| `ZF_STIRCRAZY_DIST_MIN`  | 150    | 开始应用加成的、与平均位置的最小距离                               |
| `ZF_STIRCRAZY_DIST_MAX`  | 750    | 达到此距离时获得最大加成，超过此距离加成不再增加                   |
| `ZF_STIRCRAZY_ATTACK`    | 30     | 达到 `ZF_STIRCRAZY_DIST_MAX` 距离时获得的最大攻击力加成            |

## 逻辑处理

### `perk_OnPlayerSpawn`

-   当玩家重生时，会用玩家当前的位置初始化一个包含 `ZF_STIRCRAZY_MAX_POINTS` (5) 个位置点的缓冲区。

### `updateCondStats`

-   该职业的核心逻辑在 `updateCondStats` 中周期性执行：
    1.  **更新位置缓冲区**: 将玩家当前位置存入一个循环缓冲区 (`zf_perkPos`)。
    2.  **计算平均位置**: 计算缓冲区中所有位置点的平均位置。
    3.  **计算距离**: 计算玩家当前位置与算出的平均位置之间的距离。
    4.  **应用攻击加成**:
        -   如果计算出的距离大于 `ZF_STIRCRAZY_DIST_MIN` (150)，则开始提供攻击力加成。
        -   加成的大小与距离成正比，当距离达到 `ZF_STIRCRAZY_DIST_MAX` (750) 时，获得最大的 `ZF_STIRCRAZY_ATTACK` (30) 攻击力加成。
        -   加成系数的计算方式为 `min(1.0, 距离 / ZF_STIRCRAZY_DIST_MAX)`。