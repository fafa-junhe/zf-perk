# 僵尸职业: 磁化僵尸 (Magnetic)

## 描述

**简短描述:**
> 磁化僵尸(Magnetic)——瘫痪附近建筑

**详细描述:**
> 你能使附近的步哨和地雷失效. 
> 
> “I will murder your toys as well.” 
> 推荐职业: 任何

## 参数

| 参数名 | 值 | 描述 |
| --- | --- | --- |
| `ZF_PERK_MAGNETIC` | 6 | Perk的ID |
| `ZF_MAGNETIC_RADIUSSQ` | (500 * 500) | 使步哨枪失效的光环半径（平方） |

## 核心逻辑

1.  **免于锁定**:
    *   在 `perk_OnPlayerSpawn` 事件中，为磁化僵尸添加 `TF_COND_NO_TARGET` 状态，这使得步哨枪不会主动攻击它。

2.  **瘫痪建筑**:
    *   该职业的核心逻辑在 `updateCondStats` 函数中周期性执行。
    *   **瘫痪步哨枪**:
        *   函数会遍历地图上所有的步哨枪 (`obj_sentrygun`)。
        *   对于每个步哨枪，它会检查是否有任何一个磁化僵尸进入了其 `ZF_MAGNETIC_RADIUSSQ` 范围。
        *   如果有，该步哨枪的 `m_bDisabled` 属性会被设为1，使其停止工作，并显示火花特效 (`fxSpark`)。
        *   当磁化僵尸离开范围后，该属性会被重新设为0，步哨枪恢复正常。
    *   **瘫痪地雷**:
        *   在“陷阱大师 (Trapper)”职业的逻辑中，当检查地雷是否引爆时，会同时判断附近是否有磁化僵尸。
        *   如果地雷在磁化僵尸的 `ZF_MAGNETIC_RADIUSSQ` 范围内，地雷将被视为“已禁用” (`mineDisabled = true`)，即使有僵尸踩上去也不会爆炸。

## 事件处理

该职业的功能完全通过被动光环和周期性检查实现，没有特定的主动事件处理逻辑。