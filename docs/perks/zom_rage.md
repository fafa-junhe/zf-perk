# 狂怒僵尸 (Rage)

## 简介

> *“Taaaaaaaaaank!”*

**狂怒僵尸** 是一个能在短时间内大幅度提升自身生存能力和机动性的职业。通过激活“愤怒”能力，它会变成一个临时的“坦克”，拥有更高的生命值和移动速度，能够冲散幸存者的防线或承受大量伤害。

## 详细说明

狂怒僵尸的核心能力是 **愤怒**。

- **激活方式**: 按下 `医生语音` 键 (默认 `V` 键) 来激活。
- **激活条件**: 你的当前生命值必须在 **80%** 以上才能成功激活此能力。
- **能力效果**:
    - 你的最大生命值会立刻提升 **50%** (总计达到150%)。
    - 你的移动速度会增加 **100%**。
- **效果终止**: 当你的生命值因受到伤害而降低到 **80%** 以下时，愤怒效果会立即消失，你的生命值和速度恢复正常。
- **冷却时间**: 技能结束后，会进入 **20秒** 的冷却时间。

## 参数

| 参数名 | 值 | 描述 |
| :--- | :--- | :--- |
| `ZF_RAGE_COOLDOWN` | `20` | 技能冷却时间（秒）。 |
| `ZF_RAGE_SPEED` | `100` | 激活愤怒状态时获得的速度加成百分比。 |
| `ZF_RAGE_HEALTHPCT_TOUSE` | `0.80` | 激活技能所需的最低生命值百分比。 |
| `ZF_RAGE_HEALTHPCT_ONUSE` | `0.50` | 激活技能时增加的生命值百分比。 |

## 事件处理逻辑

- **`perk_OnCallForMedic`**:
    - 检查玩家是否为狂怒僵尸。
    - 验证冷却时间 (`zf_perkTimer`) 是否为0。
    - 验证玩家生命值百分比是否高于 `ZF_RAGE_HEALTHPCT_TOUSE`。
    - 如果所有条件满足，则激活愤怒状态：
        - 设置 `zf_perkState` 为 `1` (激活状态)。
        - 设置 `zf_perkTimer` 为 `ZF_RAGE_COOLDOWN`。
        - 增加速度和生命值。
        - 播放视觉特效 (`fxPowerup`, `ZFPART_AURABURNINGORANGE`)。

- **`updateCondStats` (每秒执行)**:
    - 如果愤怒状态未激活 (`zf_perkState == 0`)，则减少冷却计时器 `zf_perkTimer`。
    - 如果愤怒状态已激活 (`zf_perkState == 1`)：
        - 持续检查生命值百分比。如果低于 `ZF_RAGE_HEALTHPCT_TOUSE`，则重置状态 (`zf_perkState = 0`) 并移除视觉光环。
        - 否则，持续应用速度加成。

- **`perk_OnPlayerSpawn`**:
    - 重置 `zf_perkState` 和 `zf_perkTimer`，确保每次重生时技能都处于可用状态。

- **`perk_OnPlayerDeath`**:
    - 移除愤怒状态的视觉光环特效。

## 推荐职业

- **机枪手**: 机枪手本身的高血量与愤怒状态的生命加成相结合，可以创造出一个极难被杀死的巨兽，能够有效吸收成吨的伤害。