# 咆哮僵尸 (Roar)

## 简介

> *“哈!”*

**咆哮僵尸** 是一种区域控制型职业，能够通过强大的声波攻击来扰乱幸存者的阵型。它的咆哮不仅能将幸存者推开，还能在短时间内削弱他们的防御力，为其他僵尸创造进攻机会。

## 详细说明

咆哮僵尸的核心能力是 **咆哮**。

- **激活方式**: 按下 `医生语音` 键 (默认 `V` 键) 来激活。
- **激活条件**:
    - 必须站在地面上。
    - 不能处于隐身状态。
- **能力效果**:
    - 对半径 **450** 单位内的所有幸存者造成一次范围攻击。
    - **击退**: 幸存者会被强大的力量推开。
    - **震慑 (Dazed)**: 幸存者的防御力会被暂时降低。震慑效果的持续时间取决于距离和咆哮僵尸的职业（机枪手会造成更长时间的震慑）。
- **冷却时间**: **15秒**。

## 参数

| 参数名 | 值 | 描述 |
| :--- | :--- | :--- |
| `ZF_ROAR_COOLDOWN` | `15` | 技能冷却时间（秒）。 |
| `ZF_ROAR_DURATION` | `20` | 非机枪手僵尸造成的“震慑”状态的基础持续时间。 |
| `ZF_ROAR_DURATION_HEAVY` | `60` | 机枪手僵尸造成的“震慑”状态的基础持续时间。 |
| `ZF_ROAR_FORCE` | `1200.0` | 非机枪手僵尸造成的击退力量。 |
| `ZF_ROAR_FORCE_HEAVY` | `3000.0` | 机枪手僵尸造成的击退力量。 (代码中为 `3000.0`，但注释建议值为 `2000.0`) |
| `ZF_ROAR_RADIUS` | `450` | 咆哮影响的半径范围。 |
| `ZF_DAZE_DEFEND` | `-40` | “震慑”状态下幸存者受到的防御力惩罚。 |

## 事件处理逻辑

- **`perk_OnCallForMedic`**:
    - 检查玩家是否为咆哮僵尸且技能冷却完毕。
    - 验证玩家是否站在地上且未隐身。
    - 若满足条件，则触发一次范围伤害 (`applyDamageRadialAtClient`)。这个伤害本身很小，其主要目的是为了触发 `perk_OnTakeDamage` 事件来施加击退和减益效果。
    - 设置 `zf_perkTimer` 为 `ZF_ROAR_COOLDOWN` 并播放音效。

- **`perk_OnTakeDamage`**:
    - 监听由咆哮僵尸触发的环境爆炸伤害 (`attackWasEnvExplosion`)。
    - 计算击退力量 (`force`) 和震慑持续时间 (`duration`)，该值会根据幸存者与咆哮僵尸之间的距离进行衰减。
    - 对范围内的幸存者施加击退效果 (`fxKnockback`)。
    - 对范围内的幸存者施加“震慑”状态 (`ZFCondIntimidated`)。

- **`updateCondStats` (每秒执行)**:
    - 减少技能冷却计时器 `zf_perkTimer`。
    - 更新HUD，显示技能是否准备就绪。
    - 如果幸存者处于 `ZFCondIntimidated` 状态，则应用 `ZF_DAZE_DEFEND` 的防御惩罚。

- **`perk_OnPlayerSpawn`**:
    - 重置 `zf_perkTimer`，确保每次重生时技能都处于可用状态。

## 推荐职业

- **任何职业**: 咆哮僵尸的能力不依赖于特定的基础职业，其强大的控场能力适用于任何情况，尤其是在狭窄空间或需要突破幸存者防线时。