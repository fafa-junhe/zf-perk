# 火焰僵尸 (Scorching)

## 简介

> *“孙哥我火了!”*

**火焰僵尸** 是一个持续对周围造成威胁的职业。它自身免疫火焰伤害，并且能将火焰带给敌人。无论是通过近战攻击还是简单的身体接触，它都能点燃幸存者，制造混乱并造成持续伤害。

## 详细说明

火焰僵尸的核心机制围绕着 **火焰**。

- **被动能力**:
    - **火焰免疫**: 你不会受到任何来源的火焰伤害（包括来自幸存者火焰兵的攻击和地图环境的火焰）。
    - **引火烧身**: 你会一直处于燃烧状态（除非在水中），这使得任何接触到你的幸存者都会被点燃。
    - **近战点燃**: 你的近战攻击会点燃被击中的幸存者。
- **属性调整**:
    - **攻击力**: 你的近战攻击力降低 **50%**。但是，由火焰造成的后续燃烧伤害不受此影响。
    - **移动速度**: 你的移动速度增加 **50%**。
- **限制**:
    - 你无法使用 **原子能饮料 (Bonk! Atomic Punch)**。

## 参数

| 参数名 | 值 | 描述 |
| :--- | :--- | :--- |
| `ZF_SCORCHING_ATTACK` | `-50` | 使用该职业时的近战攻击力惩罚百分比。 |
| `ZF_SCORCHING_SPEED` | `50` | 使用该职业时获得的速度加成百分比。 |

## 事件处理逻辑

- **`updateClientPermStats`**:
    - 在 `else if(validZom(client))` 分支下，为火焰僵尸应用永久的速度加成 (`ZF_SCORCHING_SPEED`)。

- **`perk_OnTakeDamage`**:
    - **对幸存者**: 当火焰僵尸用近战攻击幸存者时，除了基础的攻击力惩罚外，还会通过 `TF2_IgnitePlayer` 点燃目标。对于非近战的火焰伤害（例如，由自己身上的火焰蔓延造成的燃烧），则不应用攻击力惩罚。
    - **对自己**: 当火焰僵尸受到伤害时，如果伤害类型是火焰 (`attackWasFire`)，则该次伤害无效（伤害值设为0.0），实现火焰免疫。

- **`perk_OnTouch`**:
    - 当火焰僵尸（`toucher`）接触到幸存者（`touchee`）时，如果火焰僵尸自身处于燃烧状态，则会点燃幸存者。

- **`OnPlayerRunCmd`**:
    - 检查玩家是否为火焰僵尸，并且是侦察兵职业。
    - 如果玩家试图使用原子能饮料（`IN_ATTACK` + `ZFWEAP_BONK`），则阻止该次攻击输入，并向玩家显示提示信息。

- **`perk_OnPlayerSpawn`**:
    - 在玩家重生时，通过 `TF2_IgnitePlayer(client, client)` 将自己点燃，以确保“引火烧身”的被动能力生效。

## 推荐职业

- **侦察兵**: 侦察兵的高机动性与火焰僵尸的速度加成相结合，可以使其快速接近幸存者，利用身体接触和快速的近战攻击来点燃多个目标，最大化其骚扰和持续伤害的能力。