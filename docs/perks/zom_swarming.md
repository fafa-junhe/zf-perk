# 招魂僵尸 (Swarming)

## 简介

> *“嘿!速生不是投票关掉了吗?”*

**招魂僵尸** 是一个强大的辅助型职业，它能极大地增强僵尸团队的持续作战能力。通过其光环效果，它能让被击杀的队友几乎瞬间重生，形成一波又一波无穷无尽的尸潮，压垮幸存者的防线。

## 详细说明

招魂僵尸的核心机制是 **快速重生光环**。

- **被动能力**:
    - **重生光环**: 任何在你附近被击杀的僵尸队友，都会在极短的时间内（**0.5秒**）立即重生。
    - **自身快速重生**: 你自己死亡后，也会以 **0.5秒** 的速度快速重生。
- **属性调整**:
    - **攻击力**: 你的攻击力降低 **20%**。
    - **防御力**: 你的防御力降低 **20%**。
    - **移动速度**: 你的移动速度增加 **50%**。
- **视觉效果**:
    - 你身边会环绕着苍蝇特效，以标识你的光环范围。

## 参数

| 参数名 | 值 | 描述 |
| :--- | :--- | :--- |
| `ZF_SWARMING_COMBAT` | `-20` | 使用该职业时的攻击力和防御力惩罚百分比。 |
| `ZF_SWARMING_RADIUSSQ` | `(400 * 400)` | 重生光环的半径（平方）。 |
| `ZF_SWARMING_SPEED` | `50` | 使用该职业时获得的速度加成百分比。 |
| `Float:ZF_SWARMING_RESPAWNTIME` | `0.5` | 快速重生所需的时间（秒）。 |

## 事件处理逻辑

- **`updateClientPermStats`**:
    - 在 `else if(validZom(client))` 分支下，为招魂僵尸应用永久的攻防惩罚 (`ZF_SWARMING_COMBAT`) 和速度加成 (`ZF_SWARMING_SPEED`)。

- **`updateClientPermEffects`**:
    - 为招魂僵尸创建并附加苍蝇光环特效 (`ZFPART_AURAFLIES`)。

- **`perk_OnPlayerDeath`**:
    - **对自己**: 当招魂僵尸自己被击杀时，会创建一个 `perk_tSpawnClient` 定时器，在 `ZF_SWARMING_RESPAWNTIME` (0.5秒) 后将自己重生。
    - **对队友**: 当任何其他僵尸被击杀时，代码会遍历所有存活的招魂僵尸。如果被击杀的僵尸在某个招魂僵尸的 `ZF_SWARMING_RADIUSSQ` 范围内，则同样会为该被击杀的僵尸创建一个0.5秒的重生定时器。

- **`perk_tSpawnClient` (定时器回调)**:
    - 实际执行重生 (`spawnClient`) 的逻辑。

## 推荐职业

- **侦察兵**: 侦察兵的高机动性与招魂僵尸的速度加成相结合，可以使其灵活地穿梭于战场，确保其重生光环能够覆盖到尽可能多的队友，尤其是在僵尸集体冲锋时，最大化团队的压制力。