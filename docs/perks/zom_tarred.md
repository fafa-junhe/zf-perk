# 吐油僵尸 (Tarred)

## 简介

> *古怪的嚎叫声*

**吐油僵尸** 是一名出色的控场型职业，擅长使用黏稠的焦油来限制幸存者的行动。它既可以通过近战攻击直接削弱单个目标，也可以吐出焦油弹在关键位置制造大片减速区域。

## 详细说明

吐油僵尸的核心能力是 **焦油**。

- **主动能力 (吐油)**:
    - **激活方式**: 按下 `医生语音` 键 (默认 `V` 键) 来激活。
    - **激活条件**: 不能处于隐身状态。
    - **能力效果**: 你会快速连续吐出 **5** 颗焦油弹。焦油弹在碰到任何表面后，会形成一滩焦油。
    - **焦油滩效果**: 站在焦油滩上的幸存者，其移动速度会降低 **30%**，攻击速度降低 **20%**。
    - **持续与冷却**: 焦油滩的持续时间为 **30秒**，或者在你死亡后会立即消失。技能的冷却时间也是 **30秒**。

- **被动能力 (近战附着)**:
    - 你的近战攻击会直接对命中的幸存者施加焦油效果，降低其移动速度 **40%** 和攻击速度 **20%**，持续 **10秒**。

- **视觉效果**:
    - 你的模型颜色会变得更深，以作区分。

## 参数

| 参数名 | 值 | 描述 |
| :--- | :--- | :--- |
| `ZF_TARRED_MAX_ITEMS` | `5` | 一次可以激活的焦油弹/焦油滩的最大数量。 |
| `ZF_TARRED_DURATION_MELEE` | `10` | 近战攻击造成的减速效果的持续时间（秒）。 |
| `ZF_TARRED_DURATION_SLICK` | `30` | 焦油滩造成的减速效果的持续时间（秒）。 |
| `ZF_TARRED_ROF` | `-20` | 焦油效果对幸存者造成的攻击速度惩罚百分比。 |
| `ZF_TARRED_SPEED_MELEE` | `-40` | 近战攻击对幸存者造成的移动速度惩罚百分比。 |
| `ZF_TARRED_SPEED_SLICK` | `-30` | 焦油滩对幸存者造成的移动速度惩罚百分比。 |
| `ZF_TARRED_SPEED_LIMIT` | `-100` | 速度惩罚的上限阈值。 |
| `ZF_TARRED_TIMER` | `30` | 技能的冷却时间（秒）。 |
| `ZF_TARRED_RADIUS` | `75` | 焦油滩造成减速效果的半径范围。 |

## 事件处理逻辑

- **`perk_OnCallForMedic`**:
    - 检查玩家是否为吐油僵尸、技能是否冷却完毕以及是否未隐身。
    - 若满足条件，则通过创建多个 `perk_tTarredSpit` 定时器，连续发射焦油弹。

- **`perk_OnGameFrame`**:
    - 处理飞行中的焦油弹，当其碰撞后生成静态的焦油滩实体。

- **`updateCondStats`**:
    - 减少技能冷却计时器 `zf_perkTimer`。
    - 对站在焦油滩范围内的幸存者触发一次极低伤害的范围攻击，此攻击的主要目的是为了在 `perk_OnTakeDamage` 中施加减益效果。
    - 将吐油僵尸的玩家模型颜色变暗。

- **`perk_OnTakeDamage`**:
    - **近战命中时**: 当吐油僵尸近战击中幸存者时，对幸存者施加 `ZF_TARRED_SPEED_MELEE` 和 `ZF_TARRED_ROF` 的减益。
    - **焦油滩触发时**: 当幸存者受到来自焦油滩的伤害时，对其施加 `ZF_TARRED_SPEED_SLICK` 和 `ZF_TARRED_ROF` 的减益。

- **`perk_OnPlayerSpawn` / `perk_OnPlayerDeath`**:
    - 重置技能计时器并移除所有焦油滩，确保状态正确。

## 推荐职业

- **侦察兵**: 侦察兵的机动性可以帮助吐油僵尸快速接近幸存者进行近战减速，或者找到合适的角度发射焦油弹，有效地分割战场。