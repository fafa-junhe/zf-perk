# 剧毒僵尸 (Toxic)

## 简介

> *“记住这个职业:Toxic.”*

**剧毒僵尸** 是一个通过多种方式施加持续性伤害的职业。它的直接攻击力几乎可以忽略不计，但无论是主动攻击、被动反伤还是静止不动时散发的毒气，都能让幸存者陷入中毒状态，持续流失生命。

## 详细说明

剧毒僵尸的核心机制是 **中毒**。

- **被动能力 (接触中毒)**:
    - 当你用 **近战武器** 击中幸存者时，目标会中毒，持续 **10秒**。
    - 当你被幸存者的 **近战武器** 攻击时，攻击你的幸存者也会中毒，持续 **10秒**。
- **被动能力 (剧毒光环)**:
    - 当你 **静止不动** 且 **未隐身** 时，你会向周围半径 **400** 单位内的幸存者持续施加中毒伤害。
- **属性调整**:
    - **攻击力**: 你的近战攻击力大幅降低 **90%**。
- **视觉效果**:
    - 你的模型颜色会变为绿色，以作区分。

## 参数

| 参数名 | 值 | 描述 |
| :--- | :--- | :--- |
| `ZF_TOXIC_ATTACK` | `-90` | 使用该职业时的近战攻击力惩罚百分比。 |
| `ZF_TOXIC_DURATION_POISON` | `10` | 中毒效果的持续时间（秒）。 |
| `ZF_TOXIC_DAMAGE_PASSIVE` | `5` | 剧毒光环每秒对范围内的幸存者造成的伤害。 |
| `ZF_TOXIC_RADIUSSQ` | `(400 * 400)` | 剧毒光环的半径（平方）。 |
| `ZF_POISON_DAMAGE` | `7` | 中毒状态下，幸存者每秒受到的伤害。 |

## 事件处理逻辑

- **`updateClientPermStats`**:
    - 为剧毒僵尸应用永久的攻击力惩罚 (`ZF_TOXIC_ATTACK`)。

- **`updateCondStats`**:
    - **剧毒光环**: 检查剧毒僵尸是否静止不动且未隐身。如果是，则对光环范围内的所有幸存者施加 `ZF_TOXIC_DAMAGE_PASSIVE` 的中毒伤害 (`SDKHooks_TakeDamage` with `ZF_DMGTYPE_POISON`)。
    - **视觉效果**: 将剧毒僵尸的玩家模型颜色染成绿色 (`fxSetClientColor`)。

- **`perk_OnTakeDamage`**:
    - **主动攻击**: 当剧毒僵尸用近战攻击幸存者时，为幸存者添加 `ZFCondPoisoned` 状态，持续 `ZF_TOXIC_DURATION_POISON` 秒。
    - **被动反伤**: 当幸存者用近战攻击剧毒僵尸时，同样为该幸存者添加中毒状态。

- **`perk_OnPeriodic` (每秒执行)**:
    - 检查所有玩家的中毒状态 (`ZFCondPoisoned`)。如果玩家中毒，则每秒对其造成 `ZF_POISON_DAMAGE` 的伤害。

## 推荐职业

- **侦察兵、间谍**: 这两个职业的高机动性或隐身能力，可以帮助剧毒僵尸更容易地接近幸存者并施加中毒效果，或者安全地找到一个位置静止不动，利用剧毒光环进行区域伤害。