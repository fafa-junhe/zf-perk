# 技能僵尸要塞 - 职业技能测试需求

本文档用于追踪“技能僵尸要塞”插件中各个职业技能的测试进度。

## 幸存者技能 (Survival Perks)

- [x] AthleticPerk
  - [x] **被动属性**:
    - [x] 攻击力是否减少 `40` (`ZF_ATHLETIC_ATTACK`)
    - [x] 暴击率是否减少 `100` (`ZF_ATHLETIC_CRIT`) (即无暴击)
    - [x] 攻击速度是否增加 `100` (`ZF_ATHLETIC_ROF`)
    - [x] 移动速度是否增加 `100` (`ZF_ATHLETIC_SPEED`)
- [x] CarpenterPerk
  - [x] **属性**:
    - [x] 攻击力是否减少 `40` (`CARPENTER_ATTACK`)
    - [x] 防御力是否增加 `25` (`CARPENTER_DEFEND`)
  - [x] **建造障碍物 (按 `E` 呼叫医疗兵)**:
    - [x] **成功建造**:
      - [x] 是否在蹲下、站立于地面且冷却时间结束后成功建造障碍物
      - [x] 建造后是否触发 `25` 秒冷却 (`CARPENTER_COOLDOWN`) 
      - [x] 障碍物初始血量是否为 `500` (`CARPENTER_BARRICADE_HEALTH`)
      - [x] 建造时是否播放建造特效和音效
    - [x] **建造限制**:
      - [x] 是否最多只能同时存在 `4` 个障碍物 (`CARPENTER_MAX_ITEMS`)
      - [x] 达到最大数量后是否提示 "Barricades Full"
    - [x] **建造失败条件**:
      - [x] 在冷却时间内是否无法建造
      - [x] 在空中时是否无法建造，并提示 "你必须站在地上才能放置障碍物."
      - [x] 未蹲下时是否无法建造，并提示 "你必须一直蹲在地上才能放置障碍物."
      - [x] 附近有其他玩家时是否无法建造，并提示 "无法设置障碍物 - 附近有其他玩家."
      - [x] 附近有其他障碍物时是否无法建造，并提示 "无法设置障碍物 - 附近有其他玩家的障碍物."
  - [x] **障碍物交互**:
    - [x] 障碍物是否能被攻击并受到伤害
    - [x] 障碍物血量为0后是否被摧毁
- [x] CharitablePerk
  - [x] **点数系统**:
    - [x] 每次击杀是否增加 `2` 点 (`ZF_CHARITABLE_POINTS_KILL`)
    - [x] 每次助攻是否增加 `2` 点 (`ZF_CHARITABLE_POINTS_ASSIST`)
    - [x] 状态显示中的礼物数量是否正确计算 (`总点数 / 4`)
  - [x] **制造礼物 (按 `E` 呼叫医疗兵)**:
    - [x] **成功制造**:
      - [x] 当点数达到 `4` 点 (`ZF_CHARITABLE_POINTS_GIFT`) 或以上时，是否能成功丢出礼物
      - [x] 丢出礼物后是否消耗 `4` 点
    - [x] **制造失败**:
      - [x] 当点数不足 `4` 点时，是否无法丢出礼物
    - [x] **制造限制**:
      - [x] 是否最多只能同时存在 `5` 个未被拾取的礼物 (`ZF_CHARITABLE_MAX_ITEMS`)
  - [ ] **礼物拾取**GiveBotsMoreWeapons(需要另一名玩家):
    - [ ] 拾取礼物的玩家是否能获得 `75` 点生命值 (`ZF_CHARITABLE_GIFT_BONUS_HEALTH`)
    - [ ] 拾取礼物的玩家是否能获得一个持续 `20` 秒 (`ZF_CHARITABLE_GIFT_DURATION`) 的临时属性加成 (加成数值在 `10` 到 `30` 之间)
    - [ ] 丢下礼物的玩家本人是否无法拾取自己丢下的礼物
    - [ ] 礼物被拾取后是否消失
- [x] CowardlyPerk
  - [x] **被动技能 "恐慌" (Panic)**:
    - [x] **触发条件**:
      - [x] 受到僵尸的攻击伤害后是否触发 "恐慌" 状态
      - [x] 受到非僵尸伤害 (如摔落、环境伤害) 时是否不触发
      - [x] 在冷却时间内再次受到攻击是否不重复触发
    - [x] **恐慌效果**:
      - [x] 触发后，防御力是否增加 `50` (`ZF_COWARDLY_DEFEND`)
      - [x] 触发后，速度是否增加 `200` (`ZF_COWARDLY_SPEED`)
      - [x] 触发时是否播放 "yikes.wav" 音效并提示 "You panicked!"
      - [x] 恐慌效果是否持续 `5` 秒 (`ZF_COWARDLY_DURATION_SCARED`)
    - [x] **冷却阶段**:
      - [x] 恐慌效果结束后，是否进入 `30` 秒的冷却时间 (`ZF_COWARDLY_DURATION_COOLDOWN`)
      - [x] 恐慌效果结束时，是否提示 "Panic has worn off."
      - [x] 冷却时间结束后，是否提示 "You are no longer panicked and can use your ability again."
      - [x] 在冷却期间，"恐慌" 效果是否不再生效
- [x] FriendPerk
  - [x] **伙伴选择**:
    - [x] **手动选择**: 在准备阶段 (Grace Period)，对另一个幸存者按 `E` (呼叫医疗兵) 是否能成功将其选为伙伴
    - [x] **自动分配**: 如果准备阶段结束时仍未选择伙伴，系统是否会自动分配一个
    - **无心型图标**
    - [x] **选择反馈**: 成功选择伙伴后，双方是否都收到聊天提示，并且在伙伴头顶出现心形图标
  - [x] **伙伴加成 (靠近时)**:
    - [x] 当与伙伴的距离在 `300` 单位 (`ZF_FRIEND_RADIUSSQ`) 以内时:
      - [x] 双方是否都获得 `25` 点攻击力加成 (`ZF_FRIEND_ATTACK`)
      - [x] 双方是否都获得 `10` 点生命回复 (`ZF_FRIEND_REGEN`)
    - [x] 超出范围后，加成是否消失
  - [x] **暴击时间累积**:
    - [x] 玩家本人参与击杀或助攻，但伙伴未参与时，是否增加 `2` 秒暴击时间 (`ZF_FRIEND_CRITTIME_ASSIST`)
    - [x] 玩家和伙伴共同参与同一次击杀或助攻时，是否增加 `4` 秒暴击时间 (`ZF_FRIEND_CRITTIME_KILL`)
    - [x] 状态显示中是否正确显示当前累积的暴击时间
  - [x] **伙伴阵亡**:
    - [x] 当伙伴死亡时，累积的暴击时间是否转化为玩家的暴击状态
    - [x] 暴击状态持续时间是否等于之前累积的时间
    - [x] 触发暴击时，是否出现红色光环特效，并移除伙伴头顶的图标
    - [x] 暴击状态期间，暴击时间是否会随时间递减
- [x] HeroicPerk
  - [x] **被动属性**:
    - [x] 出生时，攻击力是否增加 `15` (`HEROIC_COMBAT`)
    - [x] 出生时，防御力是否增加 `15` (`HEROIC_COMBAT`)
  - [x] **暴击时间累积**:
    - [x] 出生时，是否拥有 `30` 秒初始暴击时间 (`HEROIC_CRITTIME_INIT`)
    - [x] **正常状态下 (非最后生还者)**:
      - [x] 每次击杀是否增加 `3` 秒暴击时间 (`HEROIC_CRITTIME_KILL`)
      - [x] 每次助攻是否增加 `1` 秒暴击时间 (`HEROIC_CRITTIME_ASSIST`)
    - [x] **激活状态下 (身为最后生还者)**:
      - [x] 每次击杀是否增加 `0` 秒暴击时间 (`HEROIC_CRITTIME_KILL_ACTIVE`)
      - [x] 每次助攻是否增加 `0` 秒暴击时间 (`HEROIC_CRITTIME_ASSIST_ACTIVE`)
    - [x] 状态显示中是否正确显示当前累积的暴击时间
  - [x] **最后生还者状态**:
    - [x] 当成为场上唯一幸存者时，是否立即激活暴击状态
    - [x] 暴击状态的持续时间是否等于累积的暴击时间
    - [x] 激活时是否出现红色光环特效并触发暴击音效
    - [x] 激活后，暴击时间是否随时间递减
    - [x] 暴击时间耗尽后，暴击状态和特效是否消失
    - [x] 暴击状态结束后，再次累积时间，但如果不再是最后生还者，是否不会再次触发暴击
- [x] HolyPerk
  - [x] **被动属性**:
    - [x] 攻击力是否永久减少 `25` (`ZF_HOLY_ATTACK`)
    - [x] 是否拥有永久的光环特效 (`ZFPART_AURAGLOWBEAMS`)
  - [x] **群体治疗光环**:
    - [x] **触发条件**:
      - [x] 是否必须同时满足“在地面上”、“蹲下”和“静止不动”三个条件才能触发治疗
      - [x] 移动、站立或跳跃时，治疗效果是否会中断
    - [x] **治疗效果**:
      - [x] 触发时，自身是否每秒回复 `10` 点生命值 (`ZF_HOLY_REGEN`)
      - [x] 触发时，光环内 (`400` 单位, `ZF_HOLY_RADIUSSQ`) 的其他幸存者是否也每秒回复 `10` 点生命值
      - [x] 僵尸是否不会被治疗
    - [x] **状态显示**:
      - [x] 触发治疗时，状态是否显示为 "(Healing)"
      - [x] 未触发时，状态显示是否为空
- [x] JuggernautPerk
  - [x] **被动属性**:
    - [x] 攻击力是否永久增加 `50` (`ZF_JUGGERNAUT_ATTACK`)
    - [x] 防御力是否永久减少 `50` (`ZF_JUGGERNAUT_DEFEND`)
    - [x] 移动速度是否永久减少 `100` (`ZF_JUGGERNAUT_SPEED`)
  - [x] **坠落免疫与地面冲击**:
    - [x] 从高处坠落时，是否完全免疫摔落伤害
    - [x] 落地时是否触发地面冲击特效 (`fxPuffBig`)
    - [x] **地面冲击效果 (对僵尸)**:
      - [x] 落地时，对 `150` 单位 (`ZF_JUGGERNAUT_RADIUS`) 内的僵尸是否造成 `1` 点伤害
      - [x] 范围内的僵尸是否被击退 (`ZF_JUGGERNAUT_FORCE`)
      - [x] 范围内的僵尸是否被减速 `-100` (`ZF_JUGGERNAUT_STUN_SLOWDOWN`)，持续 `1` 秒 (`ZF_JUGGERNAUT_STUN_DURATION`)
  - [x] **近战攻击**:
    - [x] 使用近战武器 (`DMG_CLUB`) 攻击僵尸时，是否能将其大力击退 (`ZF_JUGGERNAUT_FORCE`)
- [x] LeaderPerk
  - [x] **被动属性与光环**:
    - [x] 自身是否永久获得 `15%` 暴击率 (`ZF_LEADER_SELF_CRIT`)
    - [x] 自身是否拥有永久的红色光环特效 (`ZFPART_AURAINRED`)
    - [x] **被动领导光环**:
      - [x] `350` 单位 (`ZF_LEADER_OTHERS_RADIUSSQ`) 内的队友是否获得 `15` 点攻击力加成 (`ZF_LEADER_OTHERS_ATTACK`)
      - [x] 自身是否不受此光环影响
      - [x] 队友离开范围后，加成是否消失
  - [x] **集结战旗 (按 `E` 呼叫医疗兵)**:
    - [x] **放置条件**:
      - [x] 是否必须在蹲下和站立于地面的状态下才能放置战旗
      - [x] 在冷却时间内是否无法放置
    - [x] **放置效果**:
      - [x] 放置后是否进入 `150` 秒冷却 (`ZF_LEADER_RALLY_COOLDOWN`)
      - [x] 战旗是否持续存在 `90` 秒 (`ZF_LEADER_RALLY_DURATION`)
      - [x] 战旗在持续时间结束后或玩家死亡后是否消失
    - [x] **战旗增益光环**:
      - [x] `400` 单位 (`ZF_LEADER_RALLY_RADIUSSQ`) 内的队友是否获得 `15` 点攻击力 (`ZF_LEADER_RALLY_OTHERS_ATTACK`) 和 `15` 点防御力 (`ZF_LEADER_RALLY_OTHERS_DEFEND`)
      - [x] 自身在战旗范围内时，根据范围内的队友数量 (不包括自己)，每有一个队友，自身是否获得 `5` 点攻击力 (`ZF_LEADER_RALLY_SELF_ATTACK`) 和 `5` 点防御力 (`ZF_LEADER_RALLY_SELF_DEFEND`)
      - [x] 玩家离开战旗范围后，加成是否消失
- [x] NinjaPerk
  - [x] **被动属性与能力**:
    - [x] 攻击力是否永久减少 `40` (`ZF_NINJA_ATTACK`)
    - [x] 移动速度是否永久增加 `50` (`ZF_NINJA_SPEED`)
    - [x] 是否能抵抗 `50%` 的摔落伤害 (`ZF_NINJA_FALLDMG_RESIST`)
    - [x] **超级跳**:
      - [x] 在空中按跳跃键是否能触发一次向上的冲力 (`ZF_NINJA_FORCE`)
      - [x] 在地面上时是否不能触发超级跳
  - [x] **替身传送 (按 `E` 呼叫医疗兵)**:
    - [x] **设置传送点**:
      - [x] 在冷却时间结束后，在地面上按 `E` 是否能成功设置传送点
      - [x] 设置后，是否出现蓝色治疗光环特效并提示 "Retreat point placed!"
      - [x] 传送点是否持续 `15` 秒 (`ZF_NINJA_DURATION_DECOY_ACTIVE`)
      - [x] 传送点到期后，是否提示 "Your retreat point has expired." 并进入 `30` 秒冷却 (`ZF_NINJA_DURATION_COOLDOWN`)
    - [x] **触发传送**:
      - [x] 在传送点激活期间，受到僵尸的近战攻击 (`DMG_CLUB`) 时:
        - [x] 是否立即传送回之前设置的传送点位置
        - [x] 是否在原地留下一个玩家当前职业的诱饵模型 (`ZFMDL_CUTOUT`)
        - [x] 传送后是否提示 "You escaped using your decoy!"
        - [x] 传送后，传送点是否立即失效并进入 `30` 秒冷却
        - [x] 传送是否免疫本次受到的伤害
    - [x] **诱饵消失**:
      - **有时候不会消失**
      - [x] 诱饵是否在出现 `5` 秒后 (`ZF_NINJA_DURATION_DECOY_DECAY`) 自动消失
- [x] NonlethalPerk
  - [x] **子弹武器修改**:
    - [x] **伤害**:
      - [x] 使用任何带子弹的武器 (`DMG_BULLET`) 攻击僵尸时，伤害是否减少 `90%` (`ZF_NONLETHAL_ATTACK_BULLET`)
    - [x] **击退**:
      - [x] 使用子弹武器攻击僵尸时，是否能将其击退
      - [x] 击退力度是否与造成的伤害成正比 (`ZF_NONLETHAL_FORCE * damage`)
  - [x] **其他武器**:
    - [x] 使用非子弹武器 (如近战、爆炸物) 攻击时，伤害和击退效果是否不受影响
- [x] ResourcefulPerk
  - [x] **击杀奖励**:
    - [x] 击杀一名僵尸后:
      - [x] 是否回复 `25` 点生命值 (`ZF_RESOURCEFUL_HEALTH`)，并允许最多 `15` 点的过量治疗 (`ZF_RESOURCEFUL_HEALTH_OVERHEAL`)
      - [x] 是否回复主、副武器 `20%` 的备弹 (`ZF_RESOURCEFUL_AMMOPCT`)
      - [x] 是否回复 `25` 金属 (`ZF_RESOURCEFUL_METAL`)
    - [x] 助攻或击杀幸存者时，是否不触发奖励
  - [x] **拾取增益**:
    - [x] **弹药箱**:
      - [x] 拾取地图上的弹药箱后，是否获得一个持续 `10` 秒 (`ZF_RESOURCEFUL_PICKUP_DURATION`) 的 `25` 点攻击力加成 (`ZF_RESOURCEFUL_ATTACK`)
      - [x] 在加成持续时间内再次拾取弹药箱，攻击力加成是否会叠加，持续时间是否会刷新
    - [x] **医疗包**:
      - [x] 拾取地图上的医疗包后，是否获得一个持续 `10` 秒 (`ZF_RESOURCEFUL_PICKUP_DURATION`) 的 `25` 点防御力加成 (`ZF_RESOURCEFUL_DEFEND`)
      - [x] 在加成持续时间内再次拾取医疗包，防御力加成是否会叠加，持续时间是否会刷新
- [x] ScavengerPerk
  - [x] **拾取弹药箱奖励 (概率性)**:
    - [x] **暴击奖励**:
      - [x] 拾取弹药箱时，是否有 `25%` 的几率 (`SCAVENGER_CRIT_CHANCE`) 触发暴击
      - [x] 触发后，暴击状态是否持续 `5` 秒 (`SCAVENGER_CRIT_DURATION`)
      - [x] 触发后，是否提示 "You found crits!"
    - [x] **金属奖励**:
      - [x] 如果未触发暴击，是否有 `50%` 的几率 (`SCAVENGER_METAL_CHANCE`) 获得金属
      - [x] 触发后，是否获得 `50` 金属 (`SCAVENGER_METAL_AMOUNT`)
      - [x] 触发后，是否提示 "You found metal!"
    - [x] **无奖励**:
      - [x] 如果两种奖励都未触发，是否没有任何效果
    - [x] **注意**: 两种奖励是互斥的，不会同时触发
- [x] SelflessPerk
  - [x] **死亡爆炸**:
    - [x] **触发条件**:
      - [x] 当被僵尸杀死时，是否触发爆炸
      - [x] 如果是自杀、被队友或环境杀死，是否不触发爆炸
    - [x] **爆炸效果**:
      - [x] 爆炸时是否产生巨大的爆炸特效 (`fxExplosionBig`)
      - [x] 是否对 `5000` 单位 (`ZF_SELFLESS_RADIUS`) 内的僵尸造成 `10000` 点伤害 (`ZF_SELFLESS_DAMAGE`)
      - [x] 爆炸是否对幸存者无害
- [x] StashPerk
  - [x] **放置储藏点 (按 `E` 呼叫医疗兵)**:
    - [x] **放置条件**:
      - [x] 是否必须在蹲下和站立于地面的状态下才能放置
      - [x] 放置点附近 `800` 单位 (`STASH_DROP_RADSQ_CLIENT`) 内是否有其他幸存者，有则无法放置并提示 "Too close to other survivors."
      - [x] 放置点附近 `200` 单位 (`STASH_DROP_RADSQ_STASH`) 内是否有其他储藏点，有则无法放置并提示 "Too close to another stash."
      - [x] 在冷却或准备期间是否无法放置
    - [x] **放置效果**:
      - [x] 成功放置后，是否生成一个补给箱模型 (`ZFMDL_SUPPLYCRATE`)
      - [x] 是否进入 `40` 秒的准备时间 (`STASH_WARMUP`)，期间状态显示 "Warming up: Xds"
      - [x] 准备时间结束后，是否提示 "Your stash is ready."
  - [x] **拾取储藏点**:
    - [x] **拾取条件**:
      - [x] 只有在准备时间结束后才能拾取
      - [x] 是否需要靠近储藏点 (`50` 单位, `STASH_GRAB_RADSQ`) 才能拾取
    - [x] **拾取效果**:
      - [x] 拾取后，储藏点是否消失
      - [x] 是否回复 `200` 生命值并可过量治疗 (`STASH_GRAB_HEALTH`)
      - [x] 是否补满主副武器的备弹和 `200` 金属
      - [x] 是否永久增加 `10` 点攻击力 (`STASH_GRAB_ATTACK_PERM`)
      - [x] 是否获得一个持续 `45` 秒 (`STASH_GRAB_ATTACK_DURATION`) 的 `100` 点临时攻击力加成 (`STASH_GRAB_ATTACK_TEMP`)
      - [x] 拾取后是否提示 "You picked up your stash."
  - [x] **冷却与消失**:
    - [x] 储藏点准备就绪后，是否会存在 `30` 秒 (`STASH_COOLDOWN`)，超时后自动消失
    - [x] 拾取或储藏点消失后，技能是否进入 `30` 秒冷却，期间无法放置
    - [x] 玩家死亡后，其放置的储藏点是否立即消失
- [x] StirCrazyPerk
  - [x] **攻击力加成**:
    - [x] **静止或小范围移动**:
      - [x] 当玩家移动距离小于 `150` 单位 (`ZF_STIRCRAZY_DIST_MIN`) 时，是否没有攻击力加成
    - [x] **高速移动**:
      - [x] 当玩家移动距离在 `150` 到 `750` 单位之间时，攻击力加成是否随移动距离线性增长
      - [x] 当玩家移动距离超过 `750` 单位 (`ZF_STIRCRAZY_DIST_MAX`) 时，攻击力加成是否达到最大值 `30` (`ZF_STIRCRAZY_ATTACK`)
    - [x] **机制**:
      - [x] 技能是否通过持续记录玩家位置并计算当前位置与平均位置的距离来判断移动速度
- [x] TantrumPerk
  - [x] **发怒 (按 `E` 呼叫医疗兵)**:
    - [x] **激活条件**:
      - [x] 在技能冷却完毕后，按 `E` 是否能成功激活
      - [x] 在激活或冷却期间，是否无法再次激活
    - [x] **暴怒阶段**:
      - [x] 激活后，是否立即获得 `100%` 暴击率
      - [x] 暴怒状态是否持续 `15` 秒 (`ZF_TANTRUM_ACTIVE`)
      - [x] 激活时是否触发暴击特效 (`fxKritzStart`) 并提示 "You are enraged! CRITICAL HITS!"
    - [x] **疲惫阶段**:
      - [x] 暴怒阶段结束后，是否立即进入 `30` 秒的疲惫阶段 (`ZF_TANTRUM_COOLDOWN`)
      - [x] 在疲惫阶段，移动速度是否减少 `100` (`ZF_TANTRUM_SPEED`)
      - [x] 暴怒结束进入疲惫时，是否停止暴击特效 (`fxKritzStop`) 并提示 "You are exhausted."
    - [x] **冷却完成**:
      - [x] 疲惫阶段结束后，技能是否完全冷却并提示 "Tantrum ability is ready."
- [x] TrapperPerk
  - [x] **放置地雷 (按 `E` 呼叫医疗兵)**:
    - [x] **放置条件**:
      - [x] 是否必须在蹲下和站立于地面的状态下才能放置
      - [x] 在 `20` 秒冷却 (`ZF_TRAPPER_TIMER`) 期间是否无法放置
      - [x] 场上地雷达到 `5` 个上限 (`ZF_TRAPPER_MAX_ITEMS`) 时是否无法放置，并提示 "(Mines Full)"
    - [x] **放置效果**:
      - [x] 成功放置后，是否在玩家前方地面生成一个地雷模型 (`ZFMDL_MINE`)
      - [x] 放置时是否播放工程师的语音
      - [x] 技能是否进入 `20` 秒冷却
  - [x] **地雷触发**:
    - [x] **普通触发**:
      - [x] 当僵尸进入地雷 `200` 单位 (`ZF_TRAPPER_RADIUSSQ`) 范围时，地雷是否爆炸
      - [x] 爆炸是否对 `150` 单位 (`ZF_TRAPPER_RADIUS`) 内的敌人造成 `200` 点伤害 (`ZF_TRAPPER_DAMAGE`)
      - [x] 爆炸是否点燃范围内的敌人
      - [x] 爆炸后地雷是否消失
    - [x] **特殊触发 (磁力僵尸)**:
      - [x] 当拥有 "Magnetic" 技能的僵尸进入范围时，地雷是否不爆炸，而是直接失效并消失
      - [ ] 失效时是否播放电火花特效 (`fxSpark`) 效果不准确，不是电火花特效，是一个灰尘特效
  - [x] **消失条件**:
    - [x] 放置者死亡后，其放置的所有地雷是否立即消失
- [x] TurtlePerk
  - [x] **被动属性**:
    - [x] 防御力是否永久增加 `75` (`ZF_TURTLE_DEFEND`)
    - [x] 移动速度是否永久减少 `150` (`ZF_TURTLE_SPEED`)
    - [x] 攻击力是否永久减少 `50` (`ZF_TURTLE_ATTACK`)
    - [x] 击退抗性是否为 `100%` (`ZF_TURTLE_KNOCKBACK_RESIST`)，即完全免疫任何来源的击退效果
- [x] WisePerk
  - [x] **攻击力加成**:
    - [x] 击杀僵尸后，攻击力是否永久增加 `1` (`ZF_WISE_ATTACK_KILL`)
    - [x] 助攻击杀僵尸后，攻击力是否不增加 (`ZF_WISE_ATTACK_ASSIST` 为 0)
  - [x] **防御力加成**:
    - [x] **触发条件**:
      - [x] 受到僵尸的近战攻击后，防御力是否永久增加 `1` (`ZF_WISE_DEFEND`)
      - [x] 受到幸存者的攻击或非近战攻击时，防御力是否不增加
    - [x] **加成上限**:
      - [x] 防御力加成达到 `20` (`ZF_WISE_DEFEND_LIMIT`) 后，再次受到近战攻击，防御力是否不再增加
- [x] ZenlikePerk
  - [x] **暴击率累积与生命恢复**:
    - [x] **触发条件**:
      - [x] 在“蹲下”、“静止”且“在地面上”时，暴击率是否每秒（根据服务器帧率）增加 `3` (`ZF_ZENLIKE_CRIT_INC`)
      - [x] 在满足上述条件且未中毒时，是否每秒恢复 `1` 点生命值 (`ZF_ZENLIKE_REGEN`)
      - [x] 移动、站立或跳跃时，是否停止累积暴击率和恢复生命
    - [x] **暴击率上限**:
      - [x] 暴击率是否最高累积到 `100%`
    - [x] **状态显示**:
      - [x] 状态栏是否正确显示 `(Crit: X%)`
  - [x] **暴击率消耗**:
    - [x] **触发条件**:
      - [x] 每次攻击后（无论是否命中），暴击率是否减少 `25` (`ZF_ZENLIKE_CRIT_DEC`)
    - [x] **消耗下限**:
      - [x] 暴击率减少后是否不会低于 `0%`

---
## 新增幸存者职业 (New Survivor Perks)

### 22. 狂战士 (Berserker)
- [x] **永久属性**:
  - [x] 防御力是否永久降低 `-25%`。
- [x] **条件增益 (血量越低越强)**:
  - [x] **满血时**:
    - [x] 攻击速度和近战吸血是否无加成。
  - [x] **低血量时 (例如 50%)**:
    - [x] 攻击速度和近战吸血率是否随血量降低而线性增加。
  - [x] **濒死时 (25% 及以下)**:
    - [x] 攻击速度是否达到最大值 (`+150%`)。
    - [x] 近战吸血效果是否达到最大值 (`+50%`)。
  - [x] **回血后**:
    - [x] 增益效果是否随血量恢复而实时降低。

### 24. 登山家 (Mountaineer)
- [x] **被动能力**:
  - [x] 是否完全免疫坠落伤害。
- [x] **攀爬能力**:
  - [x] **触发条件**:
    - [x] 面对墙壁并按住跳跃键时，是否向上攀爬。
    - [x] 不面对墙壁或在空中时，按住跳跃键是否无效。
  - [x] **操作**:
    - [x] 松开跳跃键后，是否停止攀爬并下落。
- [x] **抓钩 (按 `E` 呼叫医疗兵)**:
  - [x] **成功施放**:
    - [x] 按 `E` 后是否向准星方向发射抓钩。
    - [x] 抓钩命中目标点后，是否将玩家快速拉向该点。
    - [x] 施放后是否进入 `12` 秒冷却。
  - [x] **施放失败**:
    - [x] 在冷却期间是否无法施放。

### 25. 炼金术士 (Alchemist)
- [x] **药剂生成与存储**:
  - [x] **生成**:
    - [x] 是否每 `40` 秒自动生成一瓶药剂。
  - [x] **存储**:
    - [x] 是否最多持有 `3` 瓶药剂。
    - [x] 达到上限后，计时器是否暂停或继续计时但不增加数量。
    - [x] 状态栏是否正确显示当前药剂数量。
- [ ] **投掷药剂 (按 `E` 呼叫医疗兵)**:
  - **看不清瓶子，或许根本未投掷出**
  - [ ] **成功投掷**:
    - [ ] 持有药剂时按 `E`，是否能成功投掷。
    - [ ] 投掷后药剂数量是否减一。
  - [x] **投掷失败**:
    - [x] 没有药剂时按 `E`，是否无法投掷并有提示。
- [ ] **效果区域**:
  - [ ] 药剂瓶破碎后是否生成一个持续 `10` 秒的效果区域。
  - **效果区域加上特效来表示**
  - [ ] **对友军**:
    - [ ] 进入区域的友军是否缓慢回血。
    - [ ] 进入区域的友军是否获得速度加成。
  - [ ] **对僵尸**:
    - [ ] 进入区域的僵尸是否被减速。
    - [ ] 进入区域的僵尸是否持续受到少量伤害。
  - [ ] 区域消失后，所有效果是否结束。

### 26. 守护者 (Guardian)
- [x] **守护力场**:
  - [x] **激活条件**:
    - [x] 是否在站立不动超过 `3` 秒后自动展开力场。
    - [x] 移动后力场是否立即消失。
  - [ ] **力场效果**:
    - [ ] **防御加成**:
      - [ ] 自身在力场中是否获得防御力加成。
      - [ ] 进入力场的队友是否获得防御力加成。
      - [ ] 离开力场的队友加成是否消失。
    - [ ] **推开效果**:
      - [ ] 靠近力场的僵尸是否被轻微推开。
  - [ ] **状态显示**:
    - **没有**
    - [ ] 力场激活时是否有可见的特效。

### 27. 赌徒 (Gambler)
- [x] **永久属性**:
  - [x] 暴击率是否被设置为 `0%` (或永久减少 `100%`)。
- [x] **幸运值系统**:
  - [x] **增减逻辑**:
    - [x] 每次击杀是否增加 `2` 点幸运值。
    - [x] 每次助攻是否增加 `1` 点幸运值。
  - [x] **上下限**:
    - [x] 幸运值上限是否为 `30`。
    - [x] 幸运值是否不会低于 `0`。
  - [x] 状态栏是否正确显示当前幸运值。
- [x] **随机效果 (攻击时)**:
  - [x] **触发机制**:
    - [x] 触发随机效果的几率是否等于当前的“幸运值”百分比。
  - [x] **效果池**:
    - [x] 触发时，是否随机从以下效果中选择一个：
      - [x] **3倍暴击伤害**: 造成的伤害是否为正常伤害的3倍。
      - [x] **立即装弹**: 主副武器弹药是否立即装满。
      - [x] **5秒移速加成**: 是否获得一个持续5秒的移速Buff。
      - [x] **哑火**: 攻击是否无效，并对自己造成 `10` 点伤害。

### 32. 幽灵 (Specter)
- [x] **永久属性与状态**:
  - [x] 攻击力、暴击率和移动速度是否极大提升。
  - [x] 生命值上限是否被锁定在 `30`。
  - [x] 是否无法通过任何方式（医疗枪、医疗包、技能）恢复生命值。
- [x] **相位状态 (按 `E` 呼叫医疗兵)**:
  - [x] **激活**:
    - [x] 按 `E` 后是否进入一个短暂的相位状态。
  - [x] **效果**:
    - [x] 在相位状态下，是否免疫所有伤害。
    - **可以攻击**
    - [x] 在相位状态下，是否无法攻击。
  - [x] 状态结束后，是否能重新攻击。

### 33. 回响者 (Echo)
- [x] **被动能力**:
  - [x] 是否完全免疫任何来源的击退效果。
- [x] **回响能量**:
  - [x] **储存**:
    - [x] 每当受到僵尸的近战攻击时，能量值是否增加。
    - [x] 受到其他类型伤害时，能量值是否不增加。
  - [x] 状态栏是否能显示当前能量等级。
- [x] **能量释放 (按 `E` 呼叫医疗兵)**:
  - [x] **释放效果**:
    - [x] 按 `E` 后是否对周围的僵尸造成一次强力击退。
    - [x] 击退力度是否与储存的能量成正比。
  - [x] **消耗**:
    - [x] 释放后，储存的能量是否清零。
    - [x] 如果没有能量，按 `E` 是否无效果。

### 35. 弹射专家 (Ricochet Specialist)
- [x] **被动属性**:
  - [x] 子弹类武器的伤害是否降低 `30%`。
  - [x] 非子弹武器伤害是否不受影响。
- [ ] **弹射逻辑**:
  - [ ] **触发**:
    - **无法弹射/触发**
    - [ ] 子弹击中僵尸后，是否有 `50%` 的几率弹射。
  - [ ] **弹射目标**:
    - [ ] 是否弹射到附近另一个僵尸身上。
  - [ ] **弹射伤害**:
    - [ ] 第一次弹射伤害是否为原伤害的一半。
  - [ ] **多次弹射**:
    - [ ] 第一次弹射命中后，是否仍有 `50%` 几率进行第二次弹射。
    - [ ] 第二次弹射伤害是否为第一次弹射伤害的一半（即原伤害的四分之一）。
    - [ ] 是否最多弹射两次。
  - [ ] **视觉效果**:
    - [ ] 弹射时是否有电击特效。

---
## 新增僵尸职业 (New Zombie Perks)

### 18. 腐蚀者 (Corruptor)
- [ ] **被动属性**:
  - [ ] 移动速度是否降低。
  - [ ] 对工程师的建筑是否造成额外伤害。
  - **不能腐化**
- [ ] **腐化建筑**:
  - [ ] **触发条件**:
    - [ ] 是否需要持续攻击一个步哨枪 `5` 秒才能触发腐化。
    - [ ] 中断攻击后，计时是否重置。
  - [ ] **腐化效果**:
    - [ ] 被腐化的步哨枪是否变为蓝队（僵尸方）。
    - [ ] 被腐化的步哨枪是否会攻击幸存者。
    - [ ] 腐化效果是否持续 `15` 秒。
  - [ ] **腐化结束**:
    - [ ] `15` 秒后，步哨枪是否损坏或恢复正常。

### 19. 寄生体 (Parasite)
- [ ] **被动属性**:
  - [ ] 生命值是否比普通僵尸低。
- [ ] **吸取能力 (近战攻击)**:
  - [ ] **吸血**:
    - [ ] 近战攻击幸存者时，是否能吸取生命值。
  - [ ] **偷取Uber**:
    - [ ] 近战攻击医生时，是否能偷取其Ubercharge能量。
    - [ ] 偷取的能量是否被储存起来。
- [ ] **超能爆发 (按 `E` 呼叫医疗兵)**:
  - [ ] **激活条件**:
    - [ ] 是否需要储存足够的能量才能激活。
    - [ ] 能量不足时按 `E` 是否无效。
  - [ ] **爆发效果**:
    - [ ] 激活后是否获得 `10` 秒的巨额速度和攻击加成。
  - [ ] **虚弱状态**:
    - [ ] 爆发结束后，是否进入一个负面状态（如减速、易伤等）。

### 20. 幽影 (Phantasm)
- [x] **被动属性**:
  - [x] 生命值和攻击力是否都比普通僵尸低。
- [x] **虚空行走 (按 `E` 呼叫医疗兵)**:
  - [x] **激活**:
    - **加一个在准备阶段结束前都无法使用**
    - **加一个玩家卡住了就直接每秒扣血的机制，防止乱跑**
    - [x] 按 `E` 后是否进入“虚空行走”状态，持续 `4` 秒。
    - [x] 激活后是否进入 `12` 秒冷却。
  - [x] **状态效果**:
    - [x] 在此状态下，是否可以穿过幸存者。
    - [x] 在此状态下，是否可以穿过工程师的建筑和木工的路障。
    - **能够攻击**
    - [ ] 在此状态下，是否无法进行攻击。
    - [x] 模型是否变为半透明。
  - [x] **状态结束**:
    - [x] `4` 秒后，是否恢复正常碰撞和攻击能力。

### 21. 冲撞者 (Charger)
- [x] **被动属性**:
  - [x] 防御力是否偏高。
  - [x] 伤害是否略低。
  - [x] 移动速度是否较慢。
- [x] **冲锋 (按 `E` 呼叫医疗兵)**:
  - [ ] **激活**:
    - **变成了往上飞了，不是冲锋**
    - [ ] 按 `E` 后是否向前方进行一次长距离冲锋。
  - [ ] **冲锋状态**:
    - [ ] 冲锋期间是否免疫击退。
  - [ ] **抓住幸存者**:
    - **撞到人好像没反应**
    - [ ] 撞到第一个幸存者时，是否会“抓住”并带着他一起冲锋。
  - [ ] **撞墙**:
    - [ ] 当撞到墙壁时，冲锋是否停止。
    - [ ] 撞墙时，自身和被抓住的幸存者是否都受到大量伤害。
    - [ ] 撞墙时，自身和被抓住的幸存者是否都被击晕一段时间。

### 22. 霸主 (Overlord)
- [x] **被动属性**:
  - [x] 移动速度是否非常慢。
  - [x] 生命值是否极高。
- [x] **生成菌毯 (按 `E` 呼叫医疗兵)**:
  - [x] **放置**:
    - [x] 按 `E` 是否能在脚下生成一个“菌毯”核心实体。
  - [ ] **扩散**:
    - **无法扩散**
    - [ ] 菌毯是否会随着时间缓慢扩散。
- [x] **菌毯效果**:
  - [x] **增益**:
    - **范围太大了**
    - [x] 站在菌毯上的僵尸（包括自己）是否获得移动速度加成。
    - [x] 站在菌毯上的僵尸（包括自己）是否获得生命恢复加成。
  - [ ] **摧毁**:
    - [ ] 菌毯实体是否能被幸存者攻击并摧毁。 不能

### 23. 模仿者 (Mimic)
- [x] **被动属性**:
  - [x] 攻击力是否大幅降低。
- [ ] **伪装 (按 `E` 呼叫医疗兵)**:
  - [ ] **激活**:
    - **有问题，算了，不要用按e伪装。改为直接能使用伪装工具（spy）**
    - [ ] 按 `E` 后是否能伪装成一名随机的幸存者职业。
    - [ ] 激活后是否进入 `40` 秒冷却。
  - [ ] **伪装效果**:
    - [ ] 伪装期间，名字和模型是否变为友方（红色）。
    - [ ] 步哨枪是否仍然会攻击伪装的模仿者。
  - [ ] **解除伪装**:
    - [ ] 伪装是否在 `20` 秒后自动解除。
    - [ ] 伪装期间进行攻击，是否立即解除伪装。
- [ ] **致命一击**:
  - [ ] 从伪装状态下发起的第一次攻击，是否造成额外伤害。

### 24. 易爆者 (Volatile)
- [x] **能量储存**:
  - [x] **储存机制**:
    - [x] 受到伤害时，是否会将一部分伤害值储存为“不稳定的能量”。
    - [x] 状态栏是否显示当前储存的能量。
  - [x] **能量流失**:
    - [x] 储存的能量是否会随时间缓慢流失。
- [x] **死亡爆炸**:
  - [x] **触发**:
    - [x] 死亡时，是否根据储存的能量总量引发爆炸。
    - [x] 爆炸伤害是否与能量值成正比。
- [x] **主动引爆 (按 `E` 呼叫医疗兵)**:
  - [x] **触发**:
    - [x] 按 `E` 是否能主动引爆并杀死自己。
  - [x] **效果**:
    - [x] 主动引爆的伤害是否为死亡爆炸的一半。(包括自杀)
    
### 26. 地卜师 (Geomancer)
- [x] **被动属性**:
  - [x] 移动速度是否缓慢。
- [ ] **升起石墙 (按 `E` 呼叫医疗兵)**:
  - **无法生成，并显示Bad SetLocalOrigin(-3013798.500000,243976.875000,-534959.750000) on prop_dynamic 且为ERROR模型**
  - [ ] **生成**:
    - [ ] 按 `E` 是否能在面前的直线上瞬间升起一排石墙。
  - [ ] **石墙属性**:
    - [ ] 石墙是否能阻挡玩家和子弹。
    - [ ] 石墙是否有生命值，可以被攻击摧毁。
  - [ ] **冷却**:
    - [ ] 技能是否有较长的冷却时间。

### 30. 静电场 (Static Field)
- [x] **静电场光环**:
  - [x] **伤害机制**:
    - **加一个特效代表静电场**
    - [x] 进入光环的幸存者是否会受到伤害。
    - [x] 伤害值是否与幸存者的当前移动速度成正比。
    - [x] 站着不动的幸存者是否几乎不受伤害。
    - [x] 跑得飞快的幸存者（如侦察兵）是否受到高额伤害。

### 31. 重力扭曲者 (Gravity Warper)
- [x] **重力光环**:
  - **加一个特效代表重力扭曲**
  - [x] **影响跳跃**:
    - [x] 进入光环的幸存者，跳跃高度是否大幅降低。
  - [x] **影响坠落伤害**:
    - [x] 在光环内，幸存者受到的坠落伤害是否增加。